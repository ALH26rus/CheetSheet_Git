# Cheat sheet for Git 
Hello my dear friend!  
This cheat sheet contains the most common commands for working in Git.

## 0. Intro
One of the key features of modern version control systems (**VCS** or **SCM**) is support for parallel work by several users, including on one file. This is why VCS is so popular among IT teams.  
Git is one of many VCS.  
Once you install Git and run it, the command line (**CLI**) will appear. In the future, we will have to conduct all our operations through it.

## 1. Навигация
`cd` - сменить директорию *(change directory)*;  
`cd ..` - перейти на уровень выше, в родительскую папку;  
`cd ~` - перейти в домашнюю директорию;  
`cd /` - перейти в корневую директорию;  
`pwd` - показать текущее местоположение *(print working directory)*;  
`ls` - показать файлы и папки в текущей директории *(list directory contents)*;  
`ls -a` - показать также скрытые файлы и папки, названия которых начинаются с символа `.`.

## 2. Работа с файлами и папками

### 2.1 Создание
`touch index.html` - создать файл **index.html** в текущей папке *(англ. touch, «коснуться»)*;  
`touch index.html style.css script.js` - если нужно создать сразу несколько файлов, можно напечатать их имена в одну строку через пробел;  
`mkdir second-project` - создать папку с именем **second-project** в текущей папке *(от англ. make directory, «создать директорию»)*;  
`mkdir -p` - создать целую структуру директорий одной командой.

### 2.2 Копирование и перемещение
`cp file.txt ~/my-dir` - скопировать файл в другое место *(от англ. copy, «копировать»)*;  
`mv file.txt ~/my-dir` - переместить файл или папку в другое место *(от англ. move, «переместить»)*.

### 2.3 Чтение
`cat file.txt` - распечатать содержимое текстового файла **file.txt** *(от англ. concatenate and print, «объединить и распечатать»)*.

### 2.4 Удаление
`rm about.html` - удалить файл **about.html** *(от англ. remove, «удалить»)*;  
`rmdir images` - удалить папку **images** *(от англ. remove directory, «удалить директорию»)*;  
`rm -r second-project` - удалить папку **second-project** и всё, что она содержит *(от англ. remove, «удалить» + recursive, «рекурсивный»)*.

### 2.5 Фичи
`mkdir second-project && cd second-project && touch index.html style.css` - одновременное создание директории и файлов в ней;  

Клавиша `Tab` автоматически дописывает не только команды, но и пути. Начните печатать имя папки или файла (они должны быть в той же директории) и нажмите `Tab`. Терминал заполнит имя автоматически;

## 3. Работа с Git
Одна из ключевых задач Git — отслеживать изменения файлов в репозитории. Для этого каждый файл помечается каким-либо статусом. Рассмотрим основные.  
 * `untracked` - *(англ. «неотслеживаемый»)* новые файлы в Git-репозитории помечаются как `untracked`, то есть неотслеживаемые. Git «видит», что такой файл существует, но не следит за изменениями в нём. У `untracked`-файла нет предыдущих версий, зафиксированных в коммитах или через команду `git add`.  
 * `staged` - *(англ. «подготовленный»)* после выполнения команды `git add` файл попадает в `staging area` *(от англ. stage — «сцена», «этап [процесса]» и area — «область»)*, то есть в список файлов, которые войдут в коммит. В этот момент файл находится в состоянии `staged`.  
  * * *Staging area* также называют **index** *(англ. «каталог»)* или **cache** *(англ. «кеш»)*, а состояние файла `staged` иногда называют `indexed` или `cached`.*  
 * `tracked` - *(англ. «отслеживаемый»)* cостояние `tracked` — это противоположность `untracked`. Оно довольно широкое по смыслу: в него попадают файлы, которые уже были зафиксированы с помощью `git commit`, а также файлы, которые были добавлены в **staging area** командой `git add`. То есть все файлы, в которых Git так или иначе отслеживает изменения.  
 * `modified` - *(англ. «изменённый»)* cостояние `modified` означает, что Git сравнил содержимое файла с последней сохранённой версией и нашёл отличия. Например, файл был закоммичен и после этого изменён.  

Чтобы Git начал отслеживать изменения в проекте, папку с файлами этого проекта нужно сделать **Git-репозиторием** *(от англ. repository — «хранилище»)*. Для этого следует переместиться в неё и ввести команду `git init` *(от англ. initialize — «инициализировать»)*.  
*(Если вы случайно сделали Git-репозиторием не ту папку, её можно «разгитить». Для этого нужно удалить скрытую подпапку **.git**)*  
  
`git status` - показать текущее состояние репозитория *(от англ. status — «статус», «состояние»)*;  
`git add` - подготовить файлы к сохранению;  
`git add --all` - ключ, или флаг, `--all` позволяет подготовить к сохранению все файлы в репозитории *(от англ. add — «добавить» + от англ. all — «всё»)*;  
`git add .` - добавить в репозиторий текущую папку со всеми файлами;  
`git commit -m` - cделать коммит. Ключ `-m` присваивает коммиту сообщение *(от англ. message — «сообщение»)*;  
`git log` - просмотреть историю коммитов.  
`git log --oneline` - получить сокращённый лог *(oneline, англ. «одной строкой»)*.В терминале появятся только первые несколько символов хеша каждого коммита и их комментарии.  
*(если выход из просмотра логов не произошёл автоматически, нажмите клавишу `Q` (от англ. Quit — «выйти»)*  
`git commit --amend` - внести правки в уже сделанный коммит. Работает только с последним коммитом.  
 * `git commit --amend --no-edit` - дополнить коммит новыми файлами. `--no-edit` сообщает команде `commit`, что сообщение коммита нужно оставить как было. Пример:  
```
$ git add main.html
$ git commit -m "Добавить главную страницу"
$ git add common.css
$ git commit --amend --no-edit
```
 * `git commit --amend -m` - изменить сообщение коммита.  
`git restore --staged <file>` - убрать файл из staging area (`git add`).  
`git restore --staged` - «сбросить» все файлы из staged обратно в `untracked/modified`.  
`git reset --hard <commit hash>` - «откатить» коммит *(от англ. reset  — «сброс», «обнуление» и hard — «суровый»)*. То есть вернуть состояние репозитория к более раннему. Пример:  
```
$ git log --oneline # хеш можно найти в истории
7b972f5 (HEAD -> master) style: добавить комментарии, расставить отступы
b576d89 feat: добавить массив Expenses и цикл для добавления трат # вот сюда и вернёмся
4b58962 refactor: разделить analyzeExpenses() на countSum() и saveExpenses()  

$ git reset --hard b576d89
# теперь мы на этом коммите
HEAD is now at b576d89 feat: добавить массив Expenses и цикл для добавления трат 
```  
`git restore <file>` - «откатить» изменения, которые не попали ни в staging, ни в коммит. Если случайно изменили файл, который не планировали.  

## 4. Работа с GitHub
GitHub — платформа для хранения IT-проектов и совместной работы над ними с использованием Git. По сути, это сайт, куда можно загрузить файлы своего проекта для обмена с другими людьми.

### 4.1 Создание удаленного репозитория
Для создания удаленного репозитория перейдите на вкладку  **Repositories** *(англ. «репозитории»)*, а затем нажмите на зелёную кнопку **New** *(англ. «новый»)* справа.  
Откроется окно создания нового репозитория. Дайте ему название. Название удалённого репозитория необязательно должно совпадать с именем папки проекта у вас на компьютере.  
Нажимайте на зелёную кнопку **Create repository** *(англ. «создать репозиторий»)* внизу.  
Удалённый репозиторий создан. Страница с ним открывается автоматически. 

### 4.2 Безопасность
Один из наиболее распространённых сетевых протоколов — **SSH** *(от англ. Secure Shell Protocol)*. Он обеспечивает безопасный обмен данными в сети. С помощью этого протокола можно получать данные с удалённого компьютера или отправлять их на него. Трафик шифруется, поэтому протокол безопасен.  
SSH использует пару ключей для обеспечения безопасности — публичный и приватный.  
Обычно SSH-ключи находятся в директории **.ssh/**. Проверить наличие этой директории и файлов в ней можно с помощью команды `ls -la .ssh/`.  
Если папка пустая или её нет, всё в порядке.  
Если есть файлы с подобными названиями **id_dsa.pub**; **id_ecdsa.pub**; **id_ed25519.pub**; **id_rsa.pub** - SSH-ключи уже создавались. Если вы не создавали эти файлы, удалите их все.  

Для генерации SSH-пары можно использовать программу **ssh-keygen**.  

 * Откройте терминал и введите следующую команду: `ssh-keygen -t ed25519 -C "электронная почта, к которой привязан ваш аккаунт на GitHub"`.
 * Укажите место хранения ключей. Простой вариант — сделать домашний каталог пользователя путём по умолчанию. Для этого нажмите `Enter`.
 * Программа запросит кодовую фразу для доступа к SSH-ключу. Вы можете оставить поле пустым. Для этого нажмите `Enter`, а затем ещё раз `Enter` для подтверждения.
 * Теперь осталось проверить, что ключи действительно сгенерировались. Для этого вызовите эту команду:
`ls -a ~/.ssh`
 * После выполнения команды **ssh-keygen** будет создано два файла — **id_ed25519** и **id_ed25519.pub** (или **id_rsa** и **id_rsa.pub** — в зависимости от того, какой алгоритм вы использовали).
   * **id_ed25519/id_rsa** - приватный ключ (файл без .pub в конце);
   * **id_ed25519.pub/id_rsa.pub** - публичный ключ (на это указывает расширение .pub);
 * Скопируйте содержимое файла с публичным ключом в буфер обмена:
`$ clip < ~/.ssh/id_rsa.pub` или `$ clip < ~/.ssh/id_ed25519.pub`
*(Если `clip` не сработает, выведите содержимое файла с помощью `cat ~/.ssh/id_rsa.pub` или `cat ~/.ssh/id_ed25519.pub` и скопируйте вывод в буфер обмена из консоли)*
 * Перейдите на GitHub и выберите пункт **Settings** *(англ. «настройки»)* в меню аккаунта.
 * В меню слева нажмите на пункт **SSH and GPG keys**.
 * В открывшейся вкладке выберите **New SSH key** *(англ. «новый SSH-ключ»)*.
 * В поле **Title** *(англ. «заголовок»)* напишите название ключа.
 * В поле **Key type** *(англ. «тип ключа»)* должно быть **Authentication Key** *(англ. «ключ аутентификации»)*.
 * В поле **Key** скопируйте ваш ключ из буфера обмена.
 * Нажмите на кнопку **Add SSH key** *(англ. «добавить SSH-ключ»)*.
 * Проверьте правильность ключа с помощью следующей команды: `ssh -T git@github.com`
 * *[Ссылка на видеоинструкцию](https://code.s3.yandex.net/git_Basic/SSH_Screencast.mp4)*

### 4.3 Cвязывание локального и удаленного репозитория
 * Перейдите на страницу удалённого репозитория, выберите тип SSH и скопируйте URL.
 * Откройте консоль, перейдите в каталог локального репозитория и введите команду `git remote add` *(от англ. remote - «удалённый» и add - «добавить»)*.
 * Чтобы связать локальный репозиторий с удаленным, необходимо ввести команду: `git remote add origin git@github.com:%ИМЯ_АККАУНТА%/first-project.git` 
Команде необходимо передать два параметра: **имя удалённого репозитория** и его **URL**. В качестве имени используйте слово **origin** *(англ. «источник»)* - стандартный псевдоним, с помощью которого можно обращаться к главному удалённому репозиторию (обычно такой репозиторий один). Это значительно упрощает работу. URL вы скопировали со страницы удалённого репозитория.
 * Чтобы убедиться, что всё работает, нужно ввести команду: `git remote -v`
Флаг `-v` - короткая форма флага `--verbose` *(англ. «подробный»)*. Он позволяет показать больше информации в выводе.
 * В выводе должны быть две строчки, аналогичные этим:
```
$ git remote -v
origin    git@github.com:%ИМЯ_АККАУНТА%/%ИМЯ-ПРОЕКТА%.git (fetch)
origin    git@github.com:%ИМЯ_АККАУНТА%/%ИМЯ-ПРОЕКТА%.git (push)
```

### 4.4 Синхронизация локального и удаленного репозитория
Весь «цикл коммита» пройден: подготовили файлы с помощью `git add`, закоммитили их с комментарием командой `git commit -m`. Осталось загрузить содержимое локального репозитория на GitHub. За это отвечает команда `git push` *(от англ. push — «толкать»)*.  
В первый раз эту команду нужно вызвать с флагом `-u` и параметрами `origin` *(имя удалённого репозитория)* и `main` или `master` (название текущей ветки). Флаг `-u` свяжет локальную ветку с одноимённой удалённой. Как вы связывали локальный и удалённый репозитории, так же и здесь нужно дополнительно связать ветки.  
`git push -u origin main` 

* Если команда приведёт к ошибке, попробуйте заменить `main` на `master`.
* В дальнейшем при работе с удалённым репозиторием флаг `-u` можно опустить и писать просто `git push`.